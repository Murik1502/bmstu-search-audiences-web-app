<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <meta
            name="BMSTU Audiences App"
            content="Web site for finding free audiences in BMSTU"
    />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <title>BMSTU Audiences App</title>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>
<script>
    let scrollableEl = document.getElementById('root');
    document.documentElement.style.height = '100%';
    document.documentElement.style.overflow = 'hidden';
    document.body.style.minHeight = '100vh';
    document.body.style.height = '100vh';
    document.body.style.overflow = 'hidden';

    let overflow = 10;
    document.body.style.marginTop = `${overflow}px`;
    document.body.style.height = `${window.innerHeight + overflow}px`;
    document.body.style.paddingBottom = `${overflow}px`;
    window.scrollTo(0, overflow);

    let ts;
    const onTouchStart = (e) => {
        ts = e.touches[0].clientY;
        console.log(e)
    };
    const onTouchMove = (e) => {
        console.log(e)
        if (scrollableEl) {
            const scroll = scrollableEl.scrollTop;
            const te = e.changedTouches[0].clientY;
            if (scroll <= 0 && ts < te) {
                e.preventDefault();
            }
        } else {
            e.preventDefault();
        }
    };
    document.documentElement.addEventListener('touchstart', onTouchStart, { passive: false });
    document.documentElement.addEventListener('touchmove', onTouchMove, { passive: false });

    window.addEventListener('beforeunload', () => {
        document.documentElement.style.height = '';
        document.documentElement.style.overflow = '';
        document.body.style.minHeight = '';
        document.body.style.height = '';
        document.body.style.overflow = '';
        document.body.style.marginTop = '';
        document.body.style.paddingBottom = '';
        document.documentElement.removeEventListener('touchstart', onTouchStart);
        document.documentElement.removeEventListener('touchmove', onTouchMove);
    });
</script>
</body>
</html>
